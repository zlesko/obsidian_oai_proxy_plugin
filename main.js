/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var plugin_settings_default = {
  model: "gpt-4",
  frequency_penalty: 0,
  logit_bias: null,
  logprobs: false,
  top_logprobs: null,
  max_tokens: null,
  n: 1,
  presence_penalty: 0,
  response_format: { type: "text" },
  seed: null,
  stop: null,
  stream: false,
  temperature: 1,
  top_p: 1,
  // tools: [],
  // tool_choice: "none",
  user: null
};
var plugin_settings_info = {
  model: {
    name: "model",
    desc: "ID of the model to use. See the model endpoint compatibility table for details.",
    type: "string"
  },
  frequency_penalty: {
    name: "frequency_penalty",
    desc: "Number between -2.0 and 2.0, penalizes token repetition. Defaults to 0.",
    type: "number"
  },
  logit_bias: {
    name: "logit_bias",
    desc: "Modifies token likelihood using a map from token IDs to bias values (-100 to 100). Defaults to null.",
    type: "map"
  },
  logprobs: {
    name: "logprobs",
    desc: "Whether to return log probabilities of the output tokens. Defaults to false.",
    type: "boolean"
  },
  top_logprobs: {
    name: "top_logprobs",
    desc: "Returns the log probabilities for the top N tokens at each position, requires logprobs to be true. Defaults to null.",
    type: "integer"
  },
  max_tokens: {
    name: "max_tokens",
    desc: "Maximum number of tokens for the chat completion. Limited by the model's context length.",
    type: "integer"
  },
  n: {
    name: "n",
    desc: "Number of chat completion choices to generate. Defaults to 1.",
    type: "integer"
  },
  presence_penalty: {
    name: "presence_penalty",
    desc: "Number between -2.0 and 2.0, penalizes token presence to encourage topic variety. Defaults to 0.",
    type: "number"
  },
  response_format: {
    name: "response_format",
    desc: 'Specifies the output format. Use {"type": "json_object"} for JSON mode.',
    type: "object"
  },
  seed: {
    name: "seed",
    desc: "Ensures deterministic output for repeated requests with the same seed and parameters. Beta feature.",
    type: "integer"
  },
  temperature: {
    name: "temperature",
    desc: "Sampling temperature between 0 and 2. Controls randomness, defaults to 1.",
    type: "number"
  },
  user: {
    name: "user",
    desc: "A unique identifier for the end-user to help monitor and detect abuse.",
    type: "string"
  }
};
var MyPlugin = class extends import_obsidian.Plugin {
  async onload() {
    const data = await this.loadData() || {};
    this.settings = Object.assign({}, plugin_settings_default, data);
    const statusBarItemEl = this.addStatusBarItem();
    statusBarItemEl.setText("GPT Ready");
    this.addCommand({
      id: "system-tags-html",
      name: "system tags html",
      editorCallback: async (editor, view) => {
        this.insert_html_tag(
          editor,
          '<div class="gpt system_open"></div>',
          '<div class="gpt system_close"></div>\n'
        );
      }
    });
    this.addCommand({
      id: "user-tags-html",
      name: "user tags html",
      editorCallback: (editor, view) => {
        this.insert_html_tag(
          editor,
          '<div class="gpt user_open"></div>',
          '<div class="gpt user_close"></div>\n'
        );
      }
    });
    this.addCommand({
      id: "assistant-tags-html",
      name: "assistant tags html",
      editorCallback: (editor, view) => {
        this.insert_html_tag(
          editor,
          '<div class="gpt assistant_open"></div>',
          '<div class="gpt assistant_close"></div>\n'
        );
      }
    });
    this.addCommand({
      id: "parent-tags-html",
      name: "parent tags html",
      editorCallback: (editor, view) => {
        this.insert_html_tag(
          editor,
          '<div class="gpt parent_open"></div>',
          '<div class="gpt parent_close"></div>\n'
        );
      }
    });
    this.addCommand({
      id: "children-tags-html",
      name: "children tags html",
      editorCallback: (editor, view) => {
        this.insert_html_tag(
          editor,
          '<div class="gpt children_open"></div>\n',
          '<div class="gpt children_close"></div>\n'
        );
      }
    });
    this.addCommand({
      id: "branch_conversation",
      name: "branch conversation",
      editorCallback: async (editor, view) => {
        let parent_file = view.file;
        if (!parent_file) {
          new import_obsidian.Notice("Unable to find original file.");
          return;
        }
        let parent_link = parent_file.path;
        let last_dot_index = parent_link.lastIndexOf(".");
        if (last_dot_index != -1) {
          parent_link = parent_link.slice(0, last_dot_index);
        }
        parent_link = '\n<div class="gpt parent_open"></div>\n[[' + parent_link + ']]\n<div class="gpt parent_close"></div>';
        let branch_path = this.create_new_path(parent_file.path);
        let child_link = branch_path;
        last_dot_index = child_link.lastIndexOf(".");
        if (last_dot_index > 0) {
          child_link = child_link.slice(0, last_dot_index);
        }
        let cursor_begin = { line: 0, ch: 0 };
        let cursor_pos = editor.getCursor();
        let cursor_end = {
          line: editor.lastLine(),
          ch: editor.getLine(editor.lastLine()).length
        };
        let parent_content = editor.getRange(cursor_begin, cursor_pos);
        let child_content = editor.getRange(cursor_pos, cursor_end);
        const child_tag_regex = /^<div class="gpt children_open"><\/div>\n\n(.*?)\n<div class="gpt children_close"><\/div>$/gsm;
        let child_match = child_tag_regex.exec(child_content);
        if (child_match == null) {
          child_link = '<div class="gpt children_open"></div>\n\n[[' + child_link + ']]\n<div class="gpt children_close"></div>';
        } else {
          child_link = child_match[1] + "\n[[" + child_link + "]]";
          child_link = `<div class="gpt children_open"></div>

${child_link}
<div class="gpt children_close"></div>`;
          child_content = child_content.replace(child_tag_regex, ``);
        }
        parent_content = parent_content + child_link;
        child_content = parent_link + child_content;
        let new_file = await app.vault.create(branch_path, child_content);
        editor.replaceRange(parent_content, cursor_begin, cursor_end);
        if (this.app.workspace.activeLeaf != null) {
          const newLeaf = this.app.workspace.createLeafBySplit(this.app.workspace.activeLeaf, "vertical", true);
          newLeaf.openFile(new_file, { state: { mode: "editing" }, active: true });
        } else {
          new import_obsidian.Notice("Unable to create new leaf.");
        }
        return;
      }
    });
    this.addCommand({
      id: "send-gpt",
      name: "Send GPT",
      editorCallback: async (editor, view) => {
        statusBarItemEl.setText("GPT Generating...");
        let c = this.has_children(editor.getValue());
        if (c) {
          new import_obsidian.Notice("Cannot send branched conversations.\n\nContinue conversation in the children files.");
          statusBarItemEl.setText("GPT Ready");
          return;
        }
        const messages = await this.compile_conversation(editor);
        if (messages.length == 0) {
          new import_obsidian.Notice("No conversation to send.\n\nEnsure conversations are enclosed in system, user, or assistant tags.\n\nAdd tags from command seach (Ctrl-p)");
          statusBarItemEl.setText("GPT Ready");
          return;
        }
        let tx_data = { ...this.settings };
        tx_data.messages = messages;
        if (tx_data.model.includes("o1")) {
          const keys_to_keep = ["model", "messages"];
          for (const key in tx_data) {
            if (!keys_to_keep.includes(key)) {
              delete tx_data[key];
            }
          }
        }
        try {
          const response = await fetch(
            "http://localhost:8000/chat",
            {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(tx_data)
            }
          );
          if (!response.ok || !response.body) {
            this.append_text(editor, "Response != 200 || No response body.\n");
            statusBarItemEl.setText("GPT Ready");
            return;
          }
          try {
            let rx_data = await response.json();
            let text = "";
            text = text + '<div class="gpt assistant_open"></div>\n';
            text = text + rx_data["choices"][0]["message"]["content"];
            text = text + '\n<div class="gpt assistant_close"></div>\n';
            this.append_text(editor, text);
          } catch (e) {
            this.append_text(editor, String(e) + "\n" + response.text());
            statusBarItemEl.setText("GPT Ready");
            return;
          }
        } catch (e) {
          this.append_text(editor, String(e));
          statusBarItemEl.setText("GPT Ready");
          return;
        }
        statusBarItemEl.setText("GPT Ready");
      }
    });
    this.addSettingTab(new SampleSettingTab(this.app, this));
  }
  onunload() {
  }
  append_text(editor, text) {
    let editor_pos = {
      line: editor.lastLine(),
      ch: editor.getLine(editor.lastLine()).length
    };
    if (editor_pos.ch != 0) {
      text = "\n" + text;
      editor_pos.line += 1;
    }
    editor.replaceRange(
      text,
      {
        line: editor.lastLine(),
        ch: editor.getLine(editor.lastLine()).length
      }
    );
    editor_pos.line += 1;
    editor_pos.ch = 0;
    editor.setCursor(editor_pos);
  }
  insert_html_tag(editor, prefix, postfix) {
    let editor_pos = editor.getCursor();
    editor_pos.ch = editor.getLine(editor_pos.line).length;
    if (editor_pos.line == 0) {
      editor_pos.line += 1;
      prefix = "\n" + prefix;
    }
    if (editor_pos.ch != 0) {
      prefix = "\n" + prefix;
    }
    prefix = prefix + "\n";
    postfix = "\n" + postfix;
    editor.replaceRange(prefix + postfix, editor_pos);
    if (editor_pos.ch == 0) {
      editor_pos.line += 1;
    } else {
      editor_pos.line += 2;
      editor_pos.ch = 0;
    }
    editor.setCursor(editor_pos);
  }
  create_new_path(path) {
    const last_dot_index = path.lastIndexOf(".");
    let path_new = "";
    let ext = "";
    if (last_dot_index > 0) {
      path_new = path.slice(0, last_dot_index);
      ext = path.slice(last_dot_index);
    } else {
      path_new = path;
    }
    while (app.vault.getAbstractFileByPath(path_new + ext)) {
      path_new = path_new + "_1";
    }
    return path_new + ext;
  }
  async compile_conversation(editor) {
    let text_convo = editor.getValue();
    let text_parent = await this.get_parent_text(text_convo);
    while (text_parent != null) {
      text_convo += text_parent + "\n" + text_convo;
      text_parent = await this.get_parent_text(text_parent);
    }
    let messages = [];
    const regex = /^<div class="gpt (system|user|assistant)_open"><\/div>(.*?)<div class="gpt (system|user|assistant)_close"><\/div>$/gsm;
    while (true) {
      let match = regex.exec(text_convo);
      if (match == null) {
        break;
      }
      messages.push({ role: match[1], content: match[2].trim() });
    }
    return messages;
  }
  async get_parent_text(text) {
    const regex_parent_div = /^<div class="gpt parent_open"><\/div>(.*?)<div class="gpt parent_close"><\/div>$/sm;
    const regex_parent = /\[\[(.*?)\]\]/;
    let text_parent_div = regex_parent_div.exec(text);
    if (text_parent_div == null) {
      return null;
    }
    let text_parent = regex_parent.exec(text_parent_div[1]);
    if (text_parent == null) {
      return null;
    }
    let file_parent = app.vault.getFileByPath(text_parent[1] + ".md");
    if (!file_parent) {
      return null;
    }
    return app.vault.cachedRead(file_parent);
  }
  has_children(text) {
    const regex_children_div = /^<div class="gpt children_open"><\/div>(.*?)<div class="gpt children_close"><\/div>$/sm;
    let matches = regex_children_div.exec(text);
    if (matches == null) {
      return false;
    }
    return true;
  }
};
var SampleSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    for (const key in plugin_settings_info) {
      this.new_setting(containerEl, key);
    }
  }
  async new_setting(containerEl, key) {
    if (plugin_settings_info[key].type == "object") {
      var value_str = JSON.stringify(this.plugin.settings[key]);
    } else {
      var value_str = String(this.plugin.settings[key]);
    }
    new import_obsidian.Setting(containerEl).setName(plugin_settings_info[key].name).setDesc(plugin_settings_info[key].desc).addText(
      (text) => text.setPlaceholder("").setValue(value_str).onChange(
        async (new_value) => {
          if (new_value == "null" || new_value == "") {
            this.plugin.settings[key] = null;
          } else if (plugin_settings_info[key].type == "string") {
            this.plugin.settings[key] = new_value;
          } else if (plugin_settings_info[key].type == "number") {
            this.plugin.settings[key] = parseFloat(new_value);
          } else if (plugin_settings_info[key].type == "integer") {
            this.plugin.settings[key] = parseInt(new_value);
          } else if (plugin_settings_info[key].type == "map" || plugin_settings_info[key].type == "object") {
            try {
              this.plugin.settings[key] = JSON.parse(new_value);
            } catch (e) {
              this.plugin.settings[key] = null;
            }
          } else if (plugin_settings_info[key].type == "boolean") {
            if (new_value == "0" || new_value == "false" || new_value == "False") {
              this.plugin.settings[key] = false;
            } else if (new_value == "1" || new_value == "true" || new_value == "True") {
              this.plugin.settings[key] = true;
            }
          }
          await this.plugin.saveData(this.plugin.settings);
        }
      )
    );
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIEVkaXRvclBvc2l0aW9uLCBNYXJrZG93blZpZXcsXG5cdE1vZGFsLCBOb3RpY2UsIFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyxcblx0VEZpbGUsIFZhdWx0IH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5jb25zdCBwbHVnaW5fc2V0dGluZ3NfZGVmYXVsdDogUGFydGlhbDx7IFtrZXk6IHN0cmluZ106IGFueSB9PiA9IHtcblx0bW9kZWw6ICdncHQtNCcsXG5cdGZyZXF1ZW5jeV9wZW5hbHR5OiAwLFxuXHRsb2dpdF9iaWFzOiBudWxsLFxuXHRsb2dwcm9iczogZmFsc2UsXG5cdHRvcF9sb2dwcm9iczogbnVsbCxcblx0bWF4X3Rva2VuczogbnVsbCxcblx0bjogMSxcblx0cHJlc2VuY2VfcGVuYWx0eTogMCxcblx0cmVzcG9uc2VfZm9ybWF0OiB7IHR5cGU6IFwidGV4dFwiIH0sXG5cdHNlZWQ6IG51bGwsXG5cdHN0b3A6IG51bGwsXG5cdHN0cmVhbTogZmFsc2UsXG5cdHRlbXBlcmF0dXJlOiAxLFxuXHR0b3BfcDogMSxcblx0Ly8gdG9vbHM6IFtdLFxuXHQvLyB0b29sX2Nob2ljZTogXCJub25lXCIsXG5cdHVzZXI6IG51bGxcbn07XG5cbmNvbnN0IHBsdWdpbl9zZXR0aW5nc19pbmZvOiB7IFtrZXk6IHN0cmluZ106IHsgbmFtZTogc3RyaW5nLCBkZXNjOiBzdHJpbmcsIHR5cGU6IHN0cmluZyB9IH0gPSB7XG4gICAgbW9kZWw6IHtcbiAgICAgICAgbmFtZTogJ21vZGVsJyxcbiAgICAgICAgZGVzYzogJ0lEIG9mIHRoZSBtb2RlbCB0byB1c2UuIFNlZSB0aGUgbW9kZWwgZW5kcG9pbnQgY29tcGF0aWJpbGl0eSB0YWJsZSBmb3IgZGV0YWlscy4nLFxuICAgICAgICB0eXBlOiAnc3RyaW5nJ1xuICAgIH0sXG4gICAgZnJlcXVlbmN5X3BlbmFsdHk6IHtcbiAgICAgICAgbmFtZTogJ2ZyZXF1ZW5jeV9wZW5hbHR5JyxcbiAgICAgICAgZGVzYzogJ051bWJlciBiZXR3ZWVuIC0yLjAgYW5kIDIuMCwgcGVuYWxpemVzIHRva2VuIHJlcGV0aXRpb24uIERlZmF1bHRzIHRvIDAuJyxcbiAgICAgICAgdHlwZTogJ251bWJlcidcbiAgICB9LFxuICAgIGxvZ2l0X2JpYXM6IHtcbiAgICAgICAgbmFtZTogJ2xvZ2l0X2JpYXMnLFxuICAgICAgICBkZXNjOiAnTW9kaWZpZXMgdG9rZW4gbGlrZWxpaG9vZCB1c2luZyBhIG1hcCBmcm9tIHRva2VuIElEcyB0byBiaWFzIHZhbHVlcyAoLTEwMCB0byAxMDApLiBEZWZhdWx0cyB0byBudWxsLicsXG4gICAgICAgIHR5cGU6ICdtYXAnXG4gICAgfSxcbiAgICBsb2dwcm9iczoge1xuICAgICAgICBuYW1lOiAnbG9ncHJvYnMnLFxuICAgICAgICBkZXNjOiAnV2hldGhlciB0byByZXR1cm4gbG9nIHByb2JhYmlsaXRpZXMgb2YgdGhlIG91dHB1dCB0b2tlbnMuIERlZmF1bHRzIHRvIGZhbHNlLicsXG4gICAgICAgIHR5cGU6ICdib29sZWFuJ1xuICAgIH0sXG4gICAgdG9wX2xvZ3Byb2JzOiB7XG4gICAgICAgIG5hbWU6ICd0b3BfbG9ncHJvYnMnLFxuICAgICAgICBkZXNjOiAnUmV0dXJucyB0aGUgbG9nIHByb2JhYmlsaXRpZXMgZm9yIHRoZSB0b3AgTiB0b2tlbnMgYXQgZWFjaCBwb3NpdGlvbiwgcmVxdWlyZXMgbG9ncHJvYnMgdG8gYmUgdHJ1ZS4gRGVmYXVsdHMgdG8gbnVsbC4nLFxuICAgICAgICB0eXBlOiAnaW50ZWdlcidcbiAgICB9LFxuICAgIG1heF90b2tlbnM6IHtcbiAgICAgICAgbmFtZTogJ21heF90b2tlbnMnLFxuICAgICAgICBkZXNjOiAnTWF4aW11bSBudW1iZXIgb2YgdG9rZW5zIGZvciB0aGUgY2hhdCBjb21wbGV0aW9uLiBMaW1pdGVkIGJ5IHRoZSBtb2RlbFxcJ3MgY29udGV4dCBsZW5ndGguJyxcbiAgICAgICAgdHlwZTogJ2ludGVnZXInXG4gICAgfSxcbiAgICBuOiB7XG4gICAgICAgIG5hbWU6ICduJyxcbiAgICAgICAgZGVzYzogJ051bWJlciBvZiBjaGF0IGNvbXBsZXRpb24gY2hvaWNlcyB0byBnZW5lcmF0ZS4gRGVmYXVsdHMgdG8gMS4nLFxuICAgICAgICB0eXBlOiAnaW50ZWdlcidcbiAgICB9LFxuICAgIHByZXNlbmNlX3BlbmFsdHk6IHtcbiAgICAgICAgbmFtZTogJ3ByZXNlbmNlX3BlbmFsdHknLFxuICAgICAgICBkZXNjOiAnTnVtYmVyIGJldHdlZW4gLTIuMCBhbmQgMi4wLCBwZW5hbGl6ZXMgdG9rZW4gcHJlc2VuY2UgdG8gZW5jb3VyYWdlIHRvcGljIHZhcmlldHkuIERlZmF1bHRzIHRvIDAuJyxcbiAgICAgICAgdHlwZTogJ251bWJlcidcbiAgICB9LFxuICAgIHJlc3BvbnNlX2Zvcm1hdDoge1xuICAgICAgICBuYW1lOiAncmVzcG9uc2VfZm9ybWF0JyxcbiAgICAgICAgZGVzYzogJ1NwZWNpZmllcyB0aGUgb3V0cHV0IGZvcm1hdC4gVXNlIHtcInR5cGVcIjogXCJqc29uX29iamVjdFwifSBmb3IgSlNPTiBtb2RlLicsXG4gICAgICAgIHR5cGU6ICdvYmplY3QnXG4gICAgfSxcbiAgICBzZWVkOiB7XG4gICAgICAgIG5hbWU6ICdzZWVkJyxcbiAgICAgICAgZGVzYzogJ0Vuc3VyZXMgZGV0ZXJtaW5pc3RpYyBvdXRwdXQgZm9yIHJlcGVhdGVkIHJlcXVlc3RzIHdpdGggdGhlIHNhbWUgc2VlZCBhbmQgcGFyYW1ldGVycy4gQmV0YSBmZWF0dXJlLicsXG4gICAgICAgIHR5cGU6ICdpbnRlZ2VyJ1xuICAgIH0sXG4gICAgdGVtcGVyYXR1cmU6IHtcbiAgICAgICAgbmFtZTogJ3RlbXBlcmF0dXJlJyxcbiAgICAgICAgZGVzYzogJ1NhbXBsaW5nIHRlbXBlcmF0dXJlIGJldHdlZW4gMCBhbmQgMi4gQ29udHJvbHMgcmFuZG9tbmVzcywgZGVmYXVsdHMgdG8gMS4nLFxuICAgICAgICB0eXBlOiAnbnVtYmVyJ1xuICAgIH0sXG4gICAgdXNlcjoge1xuICAgICAgICBuYW1lOiAndXNlcicsXG4gICAgICAgIGRlc2M6ICdBIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgZW5kLXVzZXIgdG8gaGVscCBtb25pdG9yIGFuZCBkZXRlY3QgYWJ1c2UuJyxcbiAgICAgICAgdHlwZTogJ3N0cmluZydcbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNeVBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuXHRcblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmxvYWREYXRhKCkgfHwge307XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIHBsdWdpbl9zZXR0aW5nc19kZWZhdWx0LCBkYXRhKTtcblxuXHRcdC8vIFRoaXMgYWRkcyBhIHN0YXR1cyBiYXIgaXRlbSB0byB0aGUgYm90dG9tIG9mIHRoZSBhcHAuIERvZXMgbm90IHdvcmsgb24gbW9iaWxlIGFwcHMuXG5cdFx0Y29uc3Qgc3RhdHVzQmFySXRlbUVsID0gdGhpcy5hZGRTdGF0dXNCYXJJdGVtKCk7XG5cdFx0c3RhdHVzQmFySXRlbUVsLnNldFRleHQoJ0dQVCBSZWFkeScpO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnc3lzdGVtLXRhZ3MtaHRtbCcsXG5cdFx0XHRuYW1lOiAnc3lzdGVtIHRhZ3MgaHRtbCcsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogYXN5bmMgKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0dGhpcy5pbnNlcnRfaHRtbF90YWcoZWRpdG9yLCAnPGRpdiBjbGFzcz1cImdwdCBzeXN0ZW1fb3BlblwiPjwvZGl2PicsXG5cdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJncHQgc3lzdGVtX2Nsb3NlXCI+PC9kaXY+XFxuJyk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICd1c2VyLXRhZ3MtaHRtbCcsXG5cdFx0XHRuYW1lOiAndXNlciB0YWdzIGh0bWwnLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdHRoaXMuaW5zZXJ0X2h0bWxfdGFnKGVkaXRvciwgJzxkaXYgY2xhc3M9XCJncHQgdXNlcl9vcGVuXCI+PC9kaXY+Jyxcblx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cImdwdCB1c2VyX2Nsb3NlXCI+PC9kaXY+XFxuJyk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdhc3Npc3RhbnQtdGFncy1odG1sJyxcblx0XHRcdG5hbWU6ICdhc3Npc3RhbnQgdGFncyBodG1sJyxcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHR0aGlzLmluc2VydF9odG1sX3RhZyhlZGl0b3IsICc8ZGl2IGNsYXNzPVwiZ3B0IGFzc2lzdGFudF9vcGVuXCI+PC9kaXY+Jyxcblx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cImdwdCBhc3Npc3RhbnRfY2xvc2VcIj48L2Rpdj5cXG4nKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ3BhcmVudC10YWdzLWh0bWwnLFxuXHRcdFx0bmFtZTogJ3BhcmVudCB0YWdzIGh0bWwnLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdHRoaXMuaW5zZXJ0X2h0bWxfdGFnKGVkaXRvciwgJzxkaXYgY2xhc3M9XCJncHQgcGFyZW50X29wZW5cIj48L2Rpdj4nLFxuXHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwiZ3B0IHBhcmVudF9jbG9zZVwiPjwvZGl2PlxcbicpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnY2hpbGRyZW4tdGFncy1odG1sJyxcblx0XHRcdG5hbWU6ICdjaGlsZHJlbiB0YWdzIGh0bWwnLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdHRoaXMuaW5zZXJ0X2h0bWxfdGFnKGVkaXRvciwgJzxkaXYgY2xhc3M9XCJncHQgY2hpbGRyZW5fb3BlblwiPjwvZGl2PlxcbicsXG5cdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJncHQgY2hpbGRyZW5fY2xvc2VcIj48L2Rpdj5cXG4nKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2JyYW5jaF9jb252ZXJzYXRpb24nLFxuXHRcdFx0bmFtZTogJ2JyYW5jaCBjb252ZXJzYXRpb24nLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IGFzeW5jIChlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdGxldCBwYXJlbnRfZmlsZSA9IHZpZXcuZmlsZTtcblx0XHRcdFx0aWYoIXBhcmVudF9maWxlKXtcblx0XHRcdFx0XHRuZXcgTm90aWNlKCdVbmFibGUgdG8gZmluZCBvcmlnaW5hbCBmaWxlLicpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0bGV0IHBhcmVudF9saW5rID0gcGFyZW50X2ZpbGUucGF0aDtcblx0XHRcdFx0bGV0IGxhc3RfZG90X2luZGV4ID0gcGFyZW50X2xpbmsubGFzdEluZGV4T2YoJy4nKTtcblx0XHRcdFx0aWYgKGxhc3RfZG90X2luZGV4ICE9IC0xKSB7XG5cdFx0XHRcdFx0cGFyZW50X2xpbmsgPSBwYXJlbnRfbGluay5zbGljZSgwLCBsYXN0X2RvdF9pbmRleCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cGFyZW50X2xpbmsgPSAnXFxuPGRpdiBjbGFzcz1cImdwdCBwYXJlbnRfb3BlblwiPjwvZGl2PlxcbltbJyArIHBhcmVudF9saW5rXG5cdFx0XHRcdFx0KyAnXV1cXG48ZGl2IGNsYXNzPVwiZ3B0IHBhcmVudF9jbG9zZVwiPjwvZGl2Pic7XG5cblx0XHRcdFx0bGV0IGJyYW5jaF9wYXRoID0gdGhpcy5jcmVhdGVfbmV3X3BhdGgocGFyZW50X2ZpbGUucGF0aCk7XHRcblx0XHRcdFx0bGV0IGNoaWxkX2xpbmsgPSBicmFuY2hfcGF0aDtcblx0XHRcdFx0bGFzdF9kb3RfaW5kZXggPSBjaGlsZF9saW5rLmxhc3RJbmRleE9mKCcuJyk7XG5cdFx0XHRcdGlmIChsYXN0X2RvdF9pbmRleCA+IDApIHtcblx0XHRcdFx0XHRjaGlsZF9saW5rID0gY2hpbGRfbGluay5zbGljZSgwLCBsYXN0X2RvdF9pbmRleCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRsZXQgY3Vyc29yX2JlZ2luID0ge2xpbmU6IDAsIGNoOiAwfTtcblx0XHRcdFx0bGV0IGN1cnNvcl9wb3MgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG5cdFx0XHRcdGxldCBjdXJzb3JfZW5kID0ge2xpbmU6IGVkaXRvci5sYXN0TGluZSgpLFxuXHRcdFx0XHRcdGNoOiBlZGl0b3IuZ2V0TGluZShlZGl0b3IubGFzdExpbmUoKSkubGVuZ3RofTtcblxuXHRcdFx0XHRsZXQgcGFyZW50X2NvbnRlbnQgPSBlZGl0b3IuZ2V0UmFuZ2UoY3Vyc29yX2JlZ2luLCBjdXJzb3JfcG9zKTtcblx0XHRcdFx0bGV0IGNoaWxkX2NvbnRlbnQgPSBlZGl0b3IuZ2V0UmFuZ2UoY3Vyc29yX3BvcywgY3Vyc29yX2VuZCk7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zdCBjaGlsZF90YWdfcmVnZXggPSBcblx0XHRcdFx0XHQvXjxkaXYgY2xhc3M9XCJncHQgY2hpbGRyZW5fb3BlblwiPjxcXC9kaXY+XFxuXFxuKC4qPylcXG48ZGl2IGNsYXNzPVwiZ3B0IGNoaWxkcmVuX2Nsb3NlXCI+PFxcL2Rpdj4kL2dzbTtcblx0XHRcdFx0bGV0IGNoaWxkX21hdGNoID0gY2hpbGRfdGFnX3JlZ2V4LmV4ZWMoY2hpbGRfY29udGVudCk7XG5cdFx0XHRcdGlmKGNoaWxkX21hdGNoID09IG51bGwpe1xuXHRcdFx0XHRcdGNoaWxkX2xpbmsgPSAnPGRpdiBjbGFzcz1cImdwdCBjaGlsZHJlbl9vcGVuXCI+PFxcL2Rpdj5cXG5cXG5bWydcblx0XHRcdFx0XHRcdCsgY2hpbGRfbGluayArICddXVxcbjxkaXYgY2xhc3M9XCJncHQgY2hpbGRyZW5fY2xvc2VcIj48XFwvZGl2Pic7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZXtcblx0XHRcdFx0XHRjaGlsZF9saW5rID0gY2hpbGRfbWF0Y2hbMV0gKyAnXFxuW1snICsgY2hpbGRfbGluayArICddXSc7XG5cdFx0XHRcdFx0Y2hpbGRfbGluayA9IGA8ZGl2IGNsYXNzPVwiZ3B0IGNoaWxkcmVuX29wZW5cIj48L2Rpdj5cXG5cXG4ke2NoaWxkX2xpbmt9XFxuPGRpdiBjbGFzcz1cImdwdCBjaGlsZHJlbl9jbG9zZVwiPjwvZGl2PmBcblx0XHRcdFx0XHRjaGlsZF9jb250ZW50ID0gY2hpbGRfY29udGVudC5yZXBsYWNlKGNoaWxkX3RhZ19yZWdleCwgYGApO1xuXHRcdFx0XHR9XG5cdFx0XHRcblx0XHRcdFx0cGFyZW50X2NvbnRlbnQgPSBwYXJlbnRfY29udGVudCArIGNoaWxkX2xpbms7XG5cdFx0XHRcdGNoaWxkX2NvbnRlbnQgPSBwYXJlbnRfbGluayArIGNoaWxkX2NvbnRlbnQ7XG5cdFx0XHRcdGxldCBuZXdfZmlsZSA9IGF3YWl0IGFwcC52YXVsdC5jcmVhdGUoYnJhbmNoX3BhdGgsIGNoaWxkX2NvbnRlbnQpO1xuXHRcdFx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKHBhcmVudF9jb250ZW50LCBjdXJzb3JfYmVnaW4sIGN1cnNvcl9lbmQpO1xuXG5cdFx0XHRcdGlmKHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmICE9IG51bGwpe1xuXHRcdFx0XHRcdGNvbnN0IG5ld0xlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuY3JlYXRlTGVhZkJ5U3BsaXQodGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWYsICd2ZXJ0aWNhbCcsIHRydWUpO1xuICAgICAgICBcdFx0XHRuZXdMZWFmLm9wZW5GaWxlKG5ld19maWxlLCB7IHN0YXRlOiB7IG1vZGU6IFwiZWRpdGluZ1wiIH0sIGFjdGl2ZTogdHJ1ZSB9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNle1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoJ1VuYWJsZSB0byBjcmVhdGUgbmV3IGxlYWYuJyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdzZW5kLWdwdCcsXG5cdFx0XHRuYW1lOiAnU2VuZCBHUFQnLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IGFzeW5jIChlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdC8vIHZpZXcuZmlsZS5uYW1lID0gJ3Rlc3QnOyAgLy8gQ29uc2lkZXIgYXV0by1uYW1pbmcgdGhlIGZpbGVcblx0XHRcdFx0Ly8gcHJvdGVjdCBhZ2FpbnN0IGVtcHR5IGVkaXRvclxuXHRcdFx0XHRzdGF0dXNCYXJJdGVtRWwuc2V0VGV4dCgnR1BUIEdlbmVyYXRpbmcuLi4nKTtcblx0XHRcdFx0bGV0IGMgPSB0aGlzLmhhc19jaGlsZHJlbihlZGl0b3IuZ2V0VmFsdWUoKSlcblx0XHRcdFx0aWYoYyl7XG5cdFx0XHRcdFx0bmV3IE5vdGljZSgnQ2Fubm90IHNlbmQgYnJhbmNoZWQgY29udmVyc2F0aW9ucy5cXG5cXG5Db250aW51ZSBjb252ZXJzYXRpb24gaW4gdGhlIGNoaWxkcmVuIGZpbGVzLicpO1xuXHRcdFx0XHRcdHN0YXR1c0Jhckl0ZW1FbC5zZXRUZXh0KCdHUFQgUmVhZHknKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgbWVzc2FnZXMgPSBhd2FpdCB0aGlzLmNvbXBpbGVfY29udmVyc2F0aW9uKGVkaXRvcik7XG5cdFx0XHRcdGlmKG1lc3NhZ2VzLmxlbmd0aCA9PSAwKXtcblx0XHRcdFx0XHRuZXcgTm90aWNlKCdObyBjb252ZXJzYXRpb24gdG8gc2VuZC5cXG5cXG5FbnN1cmUgY29udmVyc2F0aW9ucyBhcmUgZW5jbG9zZWQgaW4gc3lzdGVtLCB1c2VyLCBvciBhc3Npc3RhbnQgdGFncy5cXG5cXG5BZGQgdGFncyBmcm9tIGNvbW1hbmQgc2VhY2ggKEN0cmwtcCknKTtcblx0XHRcdFx0XHRzdGF0dXNCYXJJdGVtRWwuc2V0VGV4dCgnR1BUIFJlYWR5Jyk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGxldCB0eF9kYXRhID0geyAuLi50aGlzLnNldHRpbmdzIH07XG5cdFx0XHRcdHR4X2RhdGEubWVzc2FnZXMgPSBtZXNzYWdlcztcblx0XHRcdFx0aWYodHhfZGF0YS5tb2RlbC5pbmNsdWRlcygnbzEnKSl7XG5cdFx0XHRcdFx0Y29uc3Qga2V5c190b19rZWVwID0gWydtb2RlbCcsICdtZXNzYWdlcyddO1xuXHRcdFx0XHRcdGZvciAoY29uc3Qga2V5IGluIHR4X2RhdGEpIHtcblx0XHRcdFx0XHQgIGlmICgha2V5c190b19rZWVwLmluY2x1ZGVzKGtleSkpIHtcblx0XHRcdFx0XHRcdGRlbGV0ZSB0eF9kYXRhW2tleV07XG5cdFx0XHRcdFx0ICB9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHRyeXtcdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDo4MDAwL2NoYXQnLFxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRtZXRob2Q6ICdQT1NUJyxcblx0XHRcdFx0XHRcdFx0aGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9LFxuXHRcdFx0XHRcdFx0XHRib2R5OiBKU09OLnN0cmluZ2lmeSh0eF9kYXRhKVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0aWYgKCFyZXNwb25zZS5vayB8fCAhcmVzcG9uc2UuYm9keSkge1xuXHRcdFx0XHRcdFx0dGhpcy5hcHBlbmRfdGV4dChlZGl0b3IsICdSZXNwb25zZSAhPSAyMDAgfHwgTm8gcmVzcG9uc2UgYm9keS5cXG4nKTtcblx0XHRcdFx0XHRcdHN0YXR1c0Jhckl0ZW1FbC5zZXRUZXh0KCdHUFQgUmVhZHknKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dHJ5e1xuXHRcdFx0XHRcdFx0bGV0IHJ4X2RhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cdFx0XHRcdFx0XHRsZXQgdGV4dCA9ICcnO1xuXHRcdFx0XHRcdFx0dGV4dCA9IHRleHQgKyAnPGRpdiBjbGFzcz1cImdwdCBhc3Npc3RhbnRfb3BlblwiPjwvZGl2Plxcbic7XG5cdFx0XHRcdFx0XHR0ZXh0ID0gdGV4dCArIHJ4X2RhdGFbJ2Nob2ljZXMnXVswXVsnbWVzc2FnZSddWydjb250ZW50J107XG5cdFx0XHRcdFx0XHR0ZXh0ID0gdGV4dCArICdcXG48ZGl2IGNsYXNzPVwiZ3B0IGFzc2lzdGFudF9jbG9zZVwiPjwvZGl2Plxcbic7XG5cdFx0XHRcdFx0XHR0aGlzLmFwcGVuZF90ZXh0KGVkaXRvciwgdGV4dCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNhdGNoKGUpe1xuXHRcdFx0XHRcdFx0dGhpcy5hcHBlbmRfdGV4dChlZGl0b3IsIFN0cmluZyhlKSArICdcXG4nICsgcmVzcG9uc2UudGV4dCgpKTtcblx0XHRcdFx0XHRcdHN0YXR1c0Jhckl0ZW1FbC5zZXRUZXh0KCdHUFQgUmVhZHknKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXHRcdFx0XHRjYXRjaChlKXtcblx0XHRcdFx0XHR0aGlzLmFwcGVuZF90ZXh0KGVkaXRvciwgU3RyaW5nKGUpKTtcblx0XHRcdFx0XHRzdGF0dXNCYXJJdGVtRWwuc2V0VGV4dCgnR1BUIFJlYWR5Jyk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHN0YXR1c0Jhckl0ZW1FbC5zZXRUZXh0KCdHUFQgUmVhZHknKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRcblx0XHQvLyBUaGlzIGFkZHMgYSBzZXR0aW5ncyB0YWIgc28gdGhlIHVzZXIgY2FuIGNvbmZpZ3VyZSB2YXJpb3VzIGFzcGVjdHMgb2YgdGhlIHBsdWdpblxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgU2FtcGxlU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXHR9XG5cblx0b251bmxvYWQoKSB7XG5cdH1cblxuXHRhcHBlbmRfdGV4dChlZGl0b3I6IEVkaXRvciwgdGV4dDogc3RyaW5nKXtcblx0XG5cdFx0bGV0IGVkaXRvcl9wb3MgPSB7bGluZTogZWRpdG9yLmxhc3RMaW5lKCksXG5cdFx0XHRjaDogZWRpdG9yLmdldExpbmUoZWRpdG9yLmxhc3RMaW5lKCkpLmxlbmd0aH1cblx0XHRcdGlmKGVkaXRvcl9wb3MuY2ggIT0gMCl7XG5cdFx0XHRcdFx0dGV4dCA9ICdcXG4nICsgdGV4dDtcblx0XHRcdFx0ZWRpdG9yX3Bvcy5saW5lICs9IDE7XHRcdFx0XHRcblx0XHR9XG5cdFx0ZWRpdG9yLnJlcGxhY2VSYW5nZSh0ZXh0LFxuXHRcdFx0e2xpbmU6IGVkaXRvci5sYXN0TGluZSgpLFxuXHRcdFx0Y2g6IGVkaXRvci5nZXRMaW5lKGVkaXRvci5sYXN0TGluZSgpKS5sZW5ndGh9KTtcblx0XHRcblx0XHRlZGl0b3JfcG9zLmxpbmUgKz0gMTtcblx0XHRlZGl0b3JfcG9zLmNoID0gMDtcblx0XHRlZGl0b3Iuc2V0Q3Vyc29yKGVkaXRvcl9wb3MpO1xuXHR9XG5cblx0aW5zZXJ0X2h0bWxfdGFnKGVkaXRvcjogRWRpdG9yLCBwcmVmaXg6IHN0cmluZywgcG9zdGZpeDogc3RyaW5nKXtcblx0XHRsZXQgZWRpdG9yX3BvcyA9IGVkaXRvci5nZXRDdXJzb3IoKTtcblx0XHRlZGl0b3JfcG9zLmNoID0gZWRpdG9yLmdldExpbmUoZWRpdG9yX3Bvcy5saW5lKS5sZW5ndGg7XG5cdFx0aWYoZWRpdG9yX3Bvcy5saW5lID09IDApe1xuXHRcdFx0ZWRpdG9yX3Bvcy5saW5lICs9IDE7XG5cdFx0XHRwcmVmaXggPSAnXFxuJyArIHByZWZpeDtcblx0XHR9XG5cdFx0aWYoZWRpdG9yX3Bvcy5jaCAhPSAwKXtcblx0XHRcdHByZWZpeCA9ICdcXG4nICsgcHJlZml4O1xuXHRcdH1cblx0XHRwcmVmaXggPSBwcmVmaXggKyAnXFxuJztcblx0XHRwb3N0Zml4ID0gJ1xcbicgKyBwb3N0Zml4O1xuXHRcdGVkaXRvci5yZXBsYWNlUmFuZ2UocHJlZml4ICsgcG9zdGZpeCwgZWRpdG9yX3Bvcyk7XG5cdFx0aWYoZWRpdG9yX3Bvcy5jaCA9PSAwKXtcblx0XHRcdGVkaXRvcl9wb3MubGluZSArPSAxO1xuXHRcdH1cblx0XHRlbHNle1xuXHRcdFx0ZWRpdG9yX3Bvcy5saW5lICs9IDI7XG5cdFx0XHRlZGl0b3JfcG9zLmNoID0gMDtcblx0XHR9XG5cdFx0ZWRpdG9yLnNldEN1cnNvcihlZGl0b3JfcG9zKTtcblx0fVxuXG5cdGNyZWF0ZV9uZXdfcGF0aChwYXRoOiBzdHJpbmcpe1xuXHRcdGNvbnN0IGxhc3RfZG90X2luZGV4ID0gcGF0aC5sYXN0SW5kZXhPZignLicpO1xuXHRcdGxldCBwYXRoX25ldyA9ICcnO1xuXHRcdGxldCBleHQgPSAnJztcblx0XHRpZiAobGFzdF9kb3RfaW5kZXggPiAwKSB7XG5cdFx0XHRwYXRoX25ldyA9IHBhdGguc2xpY2UoMCwgbGFzdF9kb3RfaW5kZXgpO1xuXHRcdFx0ZXh0ID0gcGF0aC5zbGljZShsYXN0X2RvdF9pbmRleCk7XG5cdFx0fVxuXHRcdGVsc2V7XG5cdFx0XHRwYXRoX25ldyA9IHBhdGg7XG5cdFx0fVxuXHRcblx0XHR3aGlsZShhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGhfbmV3ICsgZXh0KSl7XG5cdFx0XHRwYXRoX25ldyA9IHBhdGhfbmV3ICsgJ18xJztcblx0XHR9XG5cdFxuXHRcdHJldHVybiBwYXRoX25ldyArIGV4dDtcblx0fVxuXG5cdGFzeW5jIGNvbXBpbGVfY29udmVyc2F0aW9uKGVkaXRvcjogRWRpdG9yKTogUHJvbWlzZTx7cm9sZTogc3RyaW5nLCBjb250ZW50OiBzdHJpbmd9W10+e1xuXHRcdC8vIGZpeCBlbXB0eSBlZGl0b3Jcblx0XHRsZXQgdGV4dF9jb252byA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuXHRcblx0XHRsZXQgdGV4dF9wYXJlbnQgPSBhd2FpdCB0aGlzLmdldF9wYXJlbnRfdGV4dCh0ZXh0X2NvbnZvKTtcblx0XHR3aGlsZSh0ZXh0X3BhcmVudCAhPSBudWxsKXtcblx0XHRcdHRleHRfY29udm8gKz0gdGV4dF9wYXJlbnQgKyAnXFxuJyArIHRleHRfY29udm87XG5cdFx0XHR0ZXh0X3BhcmVudCA9IGF3YWl0IHRoaXMuZ2V0X3BhcmVudF90ZXh0KHRleHRfcGFyZW50KTtcblx0XHR9XG5cdFxuXHRcdGxldCBtZXNzYWdlczoge3JvbGU6IHN0cmluZywgY29udGVudDogc3RyaW5nfVtdID0gW107XG5cdFx0Y29uc3QgcmVnZXggPSBcblx0XHRcdC9ePGRpdiBjbGFzcz1cImdwdCAoc3lzdGVtfHVzZXJ8YXNzaXN0YW50KV9vcGVuXCI+PFxcL2Rpdj4oLio/KTxkaXYgY2xhc3M9XCJncHQgKHN5c3RlbXx1c2VyfGFzc2lzdGFudClfY2xvc2VcIj48XFwvZGl2PiQvZ3NtO1xuXHRcdHdoaWxlKHRydWUpe1xuXHRcdFx0bGV0IG1hdGNoID0gcmVnZXguZXhlYyh0ZXh0X2NvbnZvKTtcblx0XHRcdGlmKG1hdGNoID09IG51bGwpe1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdG1lc3NhZ2VzLnB1c2goe3JvbGU6IG1hdGNoWzFdLCBjb250ZW50OiBtYXRjaFsyXS50cmltKCl9KTtcblx0XHR9XG5cdFx0XG5cdFx0cmV0dXJuIG1lc3NhZ2VzO1xuXHR9XG5cblx0YXN5bmMgZ2V0X3BhcmVudF90ZXh0KHRleHQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuXHRcdGNvbnN0IHJlZ2V4X3BhcmVudF9kaXYgPVxuXHRcdFx0L148ZGl2IGNsYXNzPVwiZ3B0IHBhcmVudF9vcGVuXCI+PFxcL2Rpdj4oLio/KTxkaXYgY2xhc3M9XCJncHQgcGFyZW50X2Nsb3NlXCI+PFxcL2Rpdj4kL3NtO1xuXHRcdGNvbnN0IHJlZ2V4X3BhcmVudCA9IC9cXFtcXFsoLio/KVxcXVxcXS87XG5cdFxuXHRcdGxldCB0ZXh0X3BhcmVudF9kaXYgPSByZWdleF9wYXJlbnRfZGl2LmV4ZWModGV4dCk7XG5cdFx0aWYodGV4dF9wYXJlbnRfZGl2ID09IG51bGwpe1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHRcdGxldCB0ZXh0X3BhcmVudCA9IHJlZ2V4X3BhcmVudC5leGVjKHRleHRfcGFyZW50X2RpdlsxXSk7XG5cdFx0aWYodGV4dF9wYXJlbnQgPT0gbnVsbCl7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdFx0bGV0IGZpbGVfcGFyZW50ID0gYXBwLnZhdWx0LmdldEZpbGVCeVBhdGgodGV4dF9wYXJlbnRbMV0gKyAnLm1kJyk7XG5cdFx0aWYoIWZpbGVfcGFyZW50KXtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblxuXHRcdHJldHVybiBhcHAudmF1bHQuY2FjaGVkUmVhZChmaWxlX3BhcmVudCk7XHRcblx0fVxuXG5cdGhhc19jaGlsZHJlbih0ZXh0OiBzdHJpbmcpOiBib29sZWFue1xuXHRcdGNvbnN0IHJlZ2V4X2NoaWxkcmVuX2RpdiA9XG5cdFx0XHQvXjxkaXYgY2xhc3M9XCJncHQgY2hpbGRyZW5fb3BlblwiPjxcXC9kaXY+KC4qPyk8ZGl2IGNsYXNzPVwiZ3B0IGNoaWxkcmVuX2Nsb3NlXCI+PFxcL2Rpdj4kL3NtO1xuXHRcdGxldCBtYXRjaGVzID0gcmVnZXhfY2hpbGRyZW5fZGl2LmV4ZWModGV4dCk7XG5cdFx0aWYobWF0Y2hlcyA9PSBudWxsKXtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cbn1cblxuY2xhc3MgU2FtcGxlU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IE15UGx1Z2luO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE15UGx1Z2luKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0ZGlzcGxheSgpOiB2b2lkIHtcblx0XHRjb25zdCB7Y29udGFpbmVyRWx9ID0gdGhpcztcblxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHRmb3IgKGNvbnN0IGtleSBpbiBwbHVnaW5fc2V0dGluZ3NfaW5mbykge1xuXHRcdFx0dGhpcy5uZXdfc2V0dGluZyhjb250YWluZXJFbCwga2V5KTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBuZXdfc2V0dGluZyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIGtleTogc3RyaW5nKXtcblx0XHRpZiAocGx1Z2luX3NldHRpbmdzX2luZm9ba2V5XS50eXBlID09ICdvYmplY3QnKXtcblx0XHRcdHZhciB2YWx1ZV9zdHIgPSBKU09OLnN0cmluZ2lmeSh0aGlzLnBsdWdpbi5zZXR0aW5nc1trZXldKTtcblx0XHR9XG5cdFx0ZWxzZXtcblx0XHRcdHZhciB2YWx1ZV9zdHIgPSBTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3Nba2V5XSk7XG5cdFx0fVxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUocGx1Z2luX3NldHRpbmdzX2luZm9ba2V5XS5uYW1lKVxuXHRcdFx0LnNldERlc2MocGx1Z2luX3NldHRpbmdzX2luZm9ba2V5XS5kZXNjKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignJylcblx0XHRcdFx0LnNldFZhbHVlKHZhbHVlX3N0cilcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIChuZXdfdmFsdWUpID0+IHtcblx0XHRcdFx0XHRpZiAobmV3X3ZhbHVlID09ICdudWxsJyB8fCBuZXdfdmFsdWUgPT0gJycpe1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Nba2V5XSA9IG51bGw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2UgaWYocGx1Z2luX3NldHRpbmdzX2luZm9ba2V5XS50eXBlID09ICdzdHJpbmcnKXtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzW2tleV0gPSBuZXdfdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2UgaWYocGx1Z2luX3NldHRpbmdzX2luZm9ba2V5XS50eXBlID09ICdudW1iZXInKXtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzW2tleV0gPSBwYXJzZUZsb2F0KG5ld192YWx1ZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2UgaWYocGx1Z2luX3NldHRpbmdzX2luZm9ba2V5XS50eXBlID09ICdpbnRlZ2VyJyl7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5nc1trZXldID0gcGFyc2VJbnQobmV3X3ZhbHVlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSBpZihwbHVnaW5fc2V0dGluZ3NfaW5mb1trZXldLnR5cGUgPT0gJ21hcCdcblx0XHRcdFx0XHRcdHx8IHBsdWdpbl9zZXR0aW5nc19pbmZvW2tleV0udHlwZSA9PSAnb2JqZWN0Jyl7XG5cdFx0XHRcdFx0XHR0cnl7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzW2tleV0gPSBKU09OLnBhcnNlKG5ld192YWx1ZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRjYXRjaHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Nba2V5XSA9IG51bGw7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2UgaWYocGx1Z2luX3NldHRpbmdzX2luZm9ba2V5XS50eXBlID09ICdib29sZWFuJyl7XG5cdFx0XHRcdFx0XHRpZihuZXdfdmFsdWUgPT0gJzAnIHx8IG5ld192YWx1ZSA9PSAnZmFsc2UnXG5cdFx0XHRcdFx0XHRcdHx8IG5ld192YWx1ZSA9PSAnRmFsc2UnKXtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Nba2V5XSA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZSBpZihuZXdfdmFsdWUgPT0gJzEnIHx8IG5ld192YWx1ZSA9PSAndHJ1ZSdcblx0XHRcdFx0XHRcdFx0fHwgbmV3X3ZhbHVlID09ICdUcnVlJyl7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzW2tleV0gPSB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xuXHRcdFx0XHR9XG5cdFx0XHQpXG5cdFx0KTtcblx0fVxufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxzQkFFcUI7QUFFckIsSUFBTSwwQkFBMkQ7QUFBQSxFQUNoRSxPQUFPO0FBQUEsRUFDUCxtQkFBbUI7QUFBQSxFQUNuQixZQUFZO0FBQUEsRUFDWixVQUFVO0FBQUEsRUFDVixjQUFjO0FBQUEsRUFDZCxZQUFZO0FBQUEsRUFDWixHQUFHO0FBQUEsRUFDSCxrQkFBa0I7QUFBQSxFQUNsQixpQkFBaUIsRUFBRSxNQUFNLE9BQU87QUFBQSxFQUNoQyxNQUFNO0FBQUEsRUFDTixNQUFNO0FBQUEsRUFDTixRQUFRO0FBQUEsRUFDUixhQUFhO0FBQUEs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
